name: Registrar Usuario

on:
  workflow_dispatch:
    inputs:
      name:
        description: 'Nombre del usuario'
        required: true
      surname:
        description: 'Apellidos del usuario'
        required: true
      birthdate:
        description: 'Fecha de nacimiento (DD/MM/AAAA)'
        required: true
      email:
        description: 'Correo electrÃ³nico'
        required: true
      notifications:
        description: 'Aceptar notificaciones (SÃ­/No)'
        required: true

jobs:
  register-user:
    runs-on: ubuntu-latest

    steps:
      # 1. Descargar el repositorio
      - name: Checkout del repositorio
        uses: actions/checkout@v3

      # 2. Crear la carpeta `Perfil` si no existe
      - name: Crear carpeta Perfil
        run: mkdir -p Perfil

      # 3. Generar archivo README.md personalizado
      - name: Generar archivo de bienvenida
        run: |
          echo "# ðŸŽ‰ Â¡Hola, ${{ github.event.inputs.name }}!" > Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "" >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "Bienvenido a **BookTrack**, ${{ github.event.inputs.name }} ${{ github.event.inputs.surname }}." >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "Â¡Nos alegra que te unas a nuestra comunidad lectora! ðŸ“šâœ¨" >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "" >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "## ðŸ“‹ **Tu informaciÃ³n personal**" >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "- **Nombre completo**: ${{ github.event.inputs.name }} ${{ github.event.inputs.surname }}" >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "- **Fecha de nacimiento**: ${{ github.event.inputs.birthdate }}" >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "- **Correo electrÃ³nico**: ${{ github.event.inputs.email }}" >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "- **Notificaciones**: ${{ github.event.inputs.notifications }}" >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "" >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "## ðŸš€ **Â¿QuÃ© hacer ahora?**" >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "1. ðŸŒŸ **Personaliza tu perfil**: Agrega tus primeras lecturas en la carpeta \`BBDD\`." >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "2. ðŸ“– **Explora clubes de lectura**: Ãšnete y comparte tus libros favoritos." >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "3. ðŸŽ¯ **DesafÃ­os grupales**: Participa en retos mensuales." >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "" >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "---" >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          echo "Â¡Gracias por unirte a BookTrack, donde cada libro cuenta una historia! ðŸŒ" >> Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md

      # 4. Hacer commit y push de los cambios
      - name: Commit y push de los cambios
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          git add Perfil/${{ github.event.inputs.name }}_${{ github.event.inputs.surname }}.md
          git commit -m "Nuevo perfil creado: ${{ github.event.inputs.name }} ${{ github.event.inputs.surname }}"
          git push

